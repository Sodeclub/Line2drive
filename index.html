<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <title>ระบบอัปโหลดรูปภาพ (Drive Sync)</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- React & ReactDOM -->
    <script src="https://unpkg.com/react@18/umd/react.production.min.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js" crossorigin></script>
    
    <!-- Babel for JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <!-- Fonts (Sarabun for Thai) -->
    <link href="https://fonts.googleapis.com/css2?family=Sarabun:wght@300;400;600;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Sarabun', sans-serif; }
        @keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
        .animate-spin { animation: spin 1s linear infinite; }
        .fade-in { animation: fadeIn 0.3s ease-in; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
    </style>
<link rel="stylesheet" href="/index.css">
</head>
<body class="bg-slate-900 text-slate-100 antialiased selection:bg-blue-500 selection:text-white">
    <div id="root"></div>

    <script type="text/babel">
        // ============================================================================
        // ⚙️ การตั้งค่าระบบ (CONFIGURATION)
        // ============================================================================
        // หากต้องการระบุ URL ล่วงหน้าเพื่อให้ผู้ใช้ไม่ต้องตั้งค่าเอง ให้วาง URL ที่นี่
        // ตัวอย่าง: "https://script.google.com/macros/s/AKfycbx.../exec"
        const PRE_CONFIGURED_WEBHOOK_URL = ""; 
        // ============================================================================

        const { useState, useEffect, useCallback } = React;

        // --- ICONS (SVG Components) ---
        const Icon = ({ children, className }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                {children}
            </svg>
        );

        const UploadCloud = ({ className }) => <Icon className={className}><path d="M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242"></path><path d="M12 12v9"></path><path d="m16 16-4-4-4 4"></path></Icon>;
        const AlertCircle = ({ className }) => <Icon className={className}><circle cx="12" cy="12" r="10"></circle><line x1="12" x2="12" y1="8" y2="12"></line><line x1="12" x2="12.01" y1="16" y2="16"></line></Icon>;
        const CheckCircle2 = ({ className }) => <Icon className={className}><circle cx="12" cy="12" r="10"></circle><path d="m9 12 2 2 4-4"></path></Icon>;
        const Loader2 = ({ className }) => <Icon className={className}><path d="M21 12a9 9 0 1 1-6.219-8.56"></path></Icon>;
        const ImageIcon = ({ className }) => <Icon className={className}><rect width="18" height="18" x="3" y="3" rx="2" ry="2"></rect><circle cx="9" cy="9" r="2"></circle><path d="m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21"></path></Icon>;
        const Settings = ({ className }) => <Icon className={className}><path d="M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.09a2 2 0 0 1-1-1.74v-.47a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"></path><circle cx="12" cy="12" r="3"></circle></Icon>;
        const Globe = ({ className }) => <Icon className={className}><circle cx="12" cy="12" r="10"></circle><line x1="2" x2="22" y1="12" y2="12"></line><path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1 4-10 15.3 15.3 0 0 1 4-10z"></path></Icon>;
        const HelpCircle = ({ className }) => <Icon className={className}><circle cx="12" cy="12" r="10"></circle><path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"></path><path d="M12 17h.01"></path></Icon>;
        const LinkIcon = ({ className }) => <Icon className={className}><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></Icon>;
        const X = ({ className }) => <Icon className={className}><path d="M18 6 6 18"></path><path d="m6 6 12 12"></path></Icon>;
        const Copy = ({ className }) => <Icon className={className}><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></Icon>;
        const ExternalLink = ({ className }) => <Icon className={className}><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" x2="21" y1="14" y2="3"></line></Icon>;

        // --- SERVICE LOGIC ---
        const fileToBase64 = (file) => {
            return new Promise((resolve, reject) => {
                const reader = new FileReader();
                reader.readAsDataURL(file);
                reader.onload = () => {
                    let encoded = reader.result;
                    encoded = encoded.split(',')[1];
                    resolve(encoded);
                };
                reader.onerror = error => reject(error);
            });
        };

        const uploadToWebhook = async (files, webhookUrl) => {
            const fileDataPromises = files.map(async (file) => ({
                name: file.name,
                mimeType: file.type,
                data: await fileToBase64(file)
            }));

            const filesPayload = await Promise.all(fileDataPromises);
            const payload = { files: filesPayload };

            // เพิ่ม parameter action=upload เพื่อให้สคริปต์รู้ว่าเป็นการอัปโหลด (รองรับอนาคต)
            const response = await fetch(webhookUrl, {
                method: 'POST',
                headers: { 'Content-Type': 'text/plain;charset=utf-8' }, 
                body: JSON.stringify(payload),
            });

            const result = await response.json();
            if (result.status !== 'success') {
                throw new Error(result.message || "การอัปโหลดล้มเหลว");
            }
        };

        // --- COMPONENTS ---

        // 1. ScriptHelp Component (Thai Version)
        const ScriptHelp = ({ onClose }) => {
            const scriptCode = `
function doPost(e) {
  // 1. ตั้งค่า (Configuration)
  // นำ Folder ID ของคุณมาใส่แทนที่คำว่า YOUR_FOLDER_ID_HERE
  var FOLDER_ID = "YOUR_FOLDER_ID_HERE"; 
  
  try {
    var data = JSON.parse(e.postData.contents);
    var folder = DriveApp.getFolderById(FOLDER_ID);
    
    // 2. ลบไฟล์เดิมทั้งหมด (Delete Existing Files)
    var files = folder.getFiles();
    while (files.hasNext()) {
      files.next().setTrashed(true);
    }
    
    // 3. อัปโหลดไฟล์ใหม่ (Upload New Files)
    if (data.files && data.files.length > 0) {
      data.files.forEach(function(file) {
        var blob = Utilities.newBlob(
          Utilities.base64Decode(file.data), 
          file.mimeType, 
          file.name
        );
        folder.createFile(blob);
      });
    }
    
    return ContentService.createTextOutput(JSON.stringify({
      "status": "success", 
      "message": "ดำเนินการสำเร็จ"
    })).setMimeType(ContentService.MimeType.JSON);
    
  } catch (err) {
    return ContentService.createTextOutput(JSON.stringify({
      "status": "error", 
      "message": err.toString()
    })).setMimeType(ContentService.MimeType.JSON);
  }
}
`;
            const handleCopy = () => {
                navigator.clipboard.writeText(scriptCode);
                alert("คัดลอกโค้ดเรียบร้อยแล้ว!");
            };

            return (
                <div className="fixed inset-0 z-50 flex items-center justify-center bg-black/90 backdrop-blur-sm p-4 overflow-y-auto">
                    <div className="bg-slate-900 border border-slate-700 rounded-2xl w-full max-w-3xl flex flex-col shadow-2xl my-auto">
                        <div className="flex items-center justify-between p-5 border-b border-slate-700 sticky top-0 bg-slate-900 z-10 rounded-t-2xl">
                            <h3 className="text-lg md:text-xl font-bold text-slate-200">วิธีติดตั้ง (Google Apps Script)</h3>
                            <button onClick={onClose} className="p-2 hover:bg-slate-800 rounded-full text-slate-400">
                                <X className="w-6 h-6" />
                            </button>
                        </div>
                        <div className="p-6 space-y-6 text-sm md:text-base">
                            <div className="space-y-6">
                                <div className="flex gap-4 items-start">
                                    <div className="bg-blue-500 text-white w-8 h-8 flex items-center justify-center rounded-full font-bold flex-shrink-0 shadow-lg shadow-blue-500/20">1</div>
                                    <div>
                                        <p className="text-slate-300 mb-2">ไปที่ <a href="https://script.google.com/home" target="_blank" rel="noreferrer" className="text-blue-400 hover:underline inline-flex items-center gap-1 font-medium">Google Apps Script <ExternalLink className="w-3 h-3"/></a> แล้วสร้าง <strong>New Project</strong></p>
                                    </div>
                                </div>
                                <div className="flex gap-4 items-start">
                                    <div className="bg-blue-500 text-white w-8 h-8 flex items-center justify-center rounded-full font-bold flex-shrink-0 shadow-lg shadow-blue-500/20">2</div>
                                    <div className="w-full overflow-hidden">
                                        <p className="text-slate-300 mb-2">ลบโค้ดเดิมออก แล้ววางโค้ดนี้ลงไป:</p>
                                        <div className="relative group">
                                            <pre className="bg-slate-950 p-4 rounded-lg text-xs text-green-400 font-mono overflow-x-auto border border-slate-800">{scriptCode}</pre>
                                            <button onClick={handleCopy} className="absolute top-2 right-2 p-2 bg-slate-800 rounded hover:bg-slate-700 text-slate-300 border border-slate-700">
                                                <Copy className="w-4 h-4" /> <span className="sr-only">Copy</span>
                                            </button>
                                        </div>
                                        <p className="text-amber-400 text-xs md:text-sm mt-3 p-2 bg-amber-400/10 rounded border border-amber-400/20">
                                            ⚠️ <strong>สำคัญ:</strong> อย่าลืมเปลี่ยน <code>YOUR_FOLDER_ID_HERE</code> เป็น ID ของโฟลเดอร์ Google Drive ของคุณ
                                        </p>
                                    </div>
                                </div>
                                <div className="flex gap-4 items-start">
                                    <div className="bg-blue-500 text-white w-8 h-8 flex items-center justify-center rounded-full font-bold flex-shrink-0 shadow-lg shadow-blue-500/20">3</div>
                                    <div>
                                        <p className="text-slate-300 mb-2">กดปุ่ม <strong>Deploy</strong> (ทำให้ใช้งานได้) {'>'} <strong>New Deployment</strong></p>
                                        <ul className="list-disc list-inside text-slate-400 text-sm space-y-1 pl-2 bg-slate-800/50 p-3 rounded-lg border border-slate-700/50">
                                            <li>เลือก Type เป็น: <strong>Web app</strong></li>
                                            <li>Execute as: <strong>Me</strong> (ฉัน)</li>
                                            <li>Who has access: <strong className="text-green-400">Anyone</strong> (ทุกคน)</li>
                                        </ul>
                                    </div>
                                </div>
                                <div className="flex gap-4 items-start">
                                    <div className="bg-blue-500 text-white w-8 h-8 flex items-center justify-center rounded-full font-bold flex-shrink-0 shadow-lg shadow-blue-500/20">4</div>
                                    <div><p className="text-slate-300">คัดลอก <strong>Web App URL</strong> ที่ได้ มาใส่ในหน้าเว็บนี้</p></div>
                                </div>
                            </div>
                        </div>
                        <div className="p-5 border-t border-slate-700 bg-slate-800/50 rounded-b-2xl sticky bottom-0 z-10">
                            <button onClick={onClose} className="w-full py-3.5 bg-blue-600 hover:bg-blue-500 text-white rounded-xl font-bold shadow-lg shadow-blue-600/20 active:scale-[0.98] transition-all">
                                เข้าใจแล้ว
                            </button>
                        </div>
                    </div>
                </div>
            );
        };

        // 2. ProcessingView Component
        const ProcessingView = ({ status, uploadTasks }) => {
            const isCompleted = status === 'COMPLETED';
            const isWorking = status === 'UPLOADING';

            return (
                <div className="w-full space-y-6 mt-8 animate-in fade-in slide-in-from-bottom-4 duration-500">
                    <div className={`flex items-center justify-between p-4 rounded-xl border ${isCompleted ? 'bg-green-500/10 border-green-500/20' : 'bg-slate-800 border-slate-700'}`}>
                        <div className="flex items-center gap-3">
                            {isWorking && <Loader2 className="w-6 h-6 text-blue-400 animate-spin" />}
                            {isCompleted && <CheckCircle2 className="w-6 h-6 text-green-400" />}
                            <span className="font-semibold text-slate-200 text-lg">
                                {isWorking ? "กำลังลบไฟล์เก่า & อัปโหลด..." : "ซิงค์ข้อมูลเสร็จสมบูรณ์!"}
                            </span>
                        </div>
                    </div>
                    <div className="space-y-3">
                        <h4 className="text-sm font-semibold text-slate-400 uppercase tracking-wider px-1">รายการไฟล์ ({uploadTasks.length})</h4>
                        <div className="grid grid-cols-1 gap-3 max-h-[40vh] overflow-y-auto pr-1 custom-scrollbar">
                            {uploadTasks.map((task, idx) => (
                                <div key={idx} className="flex items-center justify-between p-3 bg-slate-800/50 rounded-lg border border-slate-700/50">
                                    <div className="flex items-center gap-3 overflow-hidden">
                                        <div className="w-10 h-10 rounded-lg bg-slate-700 flex items-center justify-center flex-shrink-0">
                                            <ImageIcon className="w-5 h-5 text-slate-400" />
                                        </div>
                                        <span className="text-sm text-slate-200 truncate font-medium">{task.file.name}</span>
                                    </div>
                                    <div className="flex items-center gap-3">
                                        {task.status === 'uploading' && <Loader2 className="w-5 h-5 text-blue-400 animate-spin" />}
                                        {task.status === 'success' && <CheckCircle2 className="w-5 h-5 text-green-400" />}
                                        {task.status === 'error' && <span className="text-xs font-bold text-red-400 bg-red-400/10 px-2 py-1 rounded">ล้มเหลว</span>}
                                    </div>
                                </div>
                            ))}
                        </div>
                    </div>
                </div>
            );
        };

        // 3. DropZone Component
        const DropZone = ({ onFilesDropped, status }) => {
            const [isDragging, setIsDragging] = useState(false);

            const handleDragOver = (e) => {
                e.preventDefault();
                if (status === 'READY') setIsDragging(true);
            };

            const handleDragLeave = (e) => {
                e.preventDefault();
                setIsDragging(false);
            };

            const handleDrop = (e) => {
                e.preventDefault();
                setIsDragging(false);
                if (status !== 'READY') return;
                const files = Array.from(e.dataTransfer.files).filter(file => file.type.startsWith('image/'));
                if (files.length > 0) onFilesDropped(files);
            };

            const handleFileInput = (e) => {
                if (e.target.files && e.target.files.length > 0) {
                    const files = Array.from(e.target.files).filter(file => file.type.startsWith('image/'));
                    onFilesDropped(files);
                }
            };

            const isDisabled = status !== 'READY';

            return (
                <div
                    onDragOver={handleDragOver}
                    onDragLeave={handleDragLeave}
                    onDrop={handleDrop}
                    className={`relative group cursor-pointer transition-all duration-300 ease-in-out border-2 border-dashed rounded-3xl flex flex-col items-center justify-center text-center overflow-hidden
                    ${isDragging ? 'border-blue-500 bg-blue-500/10 scale-[1.02] shadow-xl shadow-blue-500/20' : 'border-slate-600 bg-slate-800/30 hover:border-slate-500 hover:bg-slate-800/50'} 
                    ${isDisabled ? 'opacity-50 cursor-not-allowed pointer-events-none' : 'active:scale-[0.98]'}`}
                    style={{ minHeight: '300px' }}
                >
                    <input type="file" multiple accept="image/*" className="absolute inset-0 w-full h-full opacity-0 cursor-pointer disabled:cursor-not-allowed z-20" disabled={isDisabled} onChange={handleFileInput} />
                    <div className="z-10 flex flex-col items-center gap-6 px-6 py-10 pointer-events-none">
                        <div className={`p-6 rounded-full transition-all duration-300 ${isDragging ? 'bg-blue-500/20 scale-110' : 'bg-slate-700/50 group-hover:bg-slate-700'}`}>
                            <UploadCloud className={`w-16 h-16 ${isDragging ? 'text-blue-400' : 'text-slate-400 group-hover:text-slate-200'}`} />
                        </div>
                        <div className="space-y-2">
                            <h3 className="text-2xl font-bold text-slate-100">แตะเพื่อเลือกรูปภาพ</h3>
                            <p className="text-slate-400 text-base">หรือลากไฟล์มาวางที่นี่</p>
                        </div>
                        <div className="flex items-center gap-2 text-xs md:text-sm text-orange-300 bg-orange-500/10 px-4 py-2 rounded-full border border-orange-500/20">
                            <AlertCircle className="w-4 h-4 flex-shrink-0" />
                            <span>รูปเดิมในโฟลเดอร์จะถูกลบทิ้งทั้งหมด</span>
                        </div>
                    </div>
                </div>
            );
        };

        // --- MAIN APP ---
        const App = () => {
            const [status, setStatus] = useState('READY'); // READY, UPLOADING, COMPLETED, ERROR
            const [uploadTasks, setUploadTasks] = useState([]);
            const [webhookUrl, setWebhookUrl] = useState(() => {
                if (PRE_CONFIGURED_WEBHOOK_URL) return PRE_CONFIGURED_WEBHOOK_URL;
                return localStorage.getItem('drive_sync_webhook_url') || '';
            });
            const [showConfig, setShowConfig] = useState(false);
            const [showScriptHelp, setShowScriptHelp] = useState(false);
            const [errorMsg, setErrorMsg] = useState(null);

            useEffect(() => {
                if (!PRE_CONFIGURED_WEBHOOK_URL) localStorage.setItem('drive_sync_webhook_url', webhookUrl);
            }, [webhookUrl]);

            const handleFiles = async (files) => {
                if (!webhookUrl) {
                    setErrorMsg("กรุณาตั้งค่า Webhook URL ก่อนเริ่มใช้งาน");
                    setShowConfig(true);
                    return;
                }

                const newTasks = files.map(f => ({ file: f, status: 'pending' }));
                setUploadTasks(newTasks);
                setErrorMsg(null);

                try {
                    setStatus('UPLOADING');
                    setUploadTasks(prev => prev.map(t => ({ ...t, status: 'uploading' })));
                    
                    await uploadToWebhook(files, webhookUrl);

                    setUploadTasks(prev => prev.map(t => ({ ...t, status: 'success' })));
                    setStatus('COMPLETED');
                } catch (err) {
                    console.error(err);
                    setStatus('READY');
                    setErrorMsg(err.message || "เกิดข้อผิดพลาดในการอัปโหลด");
                    setUploadTasks(prev => prev.map(t => ({ ...t, status: 'error' })));
                }
            };

            const handleReset = () => {
                setStatus('READY');
                setUploadTasks([]);
                setErrorMsg(null);
            };

            const isConfigured = !!webhookUrl;
            const isLocked = !!PRE_CONFIGURED_WEBHOOK_URL;

            return (
                <div className="min-h-screen flex flex-col items-center p-4 md:p-8 bg-[radial-gradient(ellipse_at_top,_var(--tw-gradient-stops))] from-slate-800 via-slate-900 to-black">
                    {showScriptHelp && <ScriptHelp onClose={() => setShowScriptHelp(false)} />}

                    <div className="w-full max-w-2xl mt-4 md:mt-12">
                        <div className="flex items-center justify-between mb-8">
                            <div>
                                <h1 className="text-2xl md:text-4xl font-bold bg-gradient-to-r from-blue-400 via-purple-400 to-pink-400 bg-clip-text text-transparent drop-shadow-lg">
                                    ระบบอัปโหลดรูปภาพ
                                </h1>
                                <p className="text-slate-400 mt-2 text-sm md:text-base flex items-center gap-2">
                                    <span className="w-2 h-2 rounded-full bg-green-500 animate-pulse"></span>
                                    Drive Sync & Swap
                                </p>
                            </div>
                            {!isLocked && (
                                <button onClick={() => setShowConfig(!showConfig)} className={`p-3 rounded-full transition-colors ${showConfig ? 'bg-slate-800 text-blue-400 shadow-inner' : 'hover:bg-slate-800 text-slate-400'}`} title="ตั้งค่า">
                                    <Settings className="w-6 h-6" />
                                </button>
                            )}
                        </div>

                        {(!isLocked && (showConfig || !isConfigured)) && (
                            <div className="mb-8 bg-slate-800/80 backdrop-blur p-6 rounded-2xl border border-slate-700 shadow-xl space-y-5 fade-in">
                                <div className="flex items-center justify-between">
                                    <label className="block text-sm font-bold text-slate-200 flex items-center gap-2">
                                        <LinkIcon className="w-4 h-4 text-blue-400" /> Google Apps Script Web App URL
                                    </label>
                                    <button onClick={() => setShowScriptHelp(true)} className="text-xs text-blue-400 flex items-center gap-1 hover:underline font-medium bg-blue-400/10 px-2 py-1 rounded-md"><HelpCircle className="w-3 h-3" /> ดูวิธีติดตั้ง</button>
                                </div>
                                <input type="text" value={webhookUrl} onChange={(e) => setWebhookUrl(e.target.value)} placeholder="วาง URL ที่ได้จากขั้นตอน Deploy ที่นี่..." className="w-full bg-slate-950 border border-slate-700 rounded-xl px-4 py-4 text-sm text-slate-200 focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition-all shadow-inner" />
                                {!isConfigured && (
                                    <div className="pt-2">
                                        <button onClick={() => setShowScriptHelp(true)} className="w-full py-3 bg-blue-600/20 hover:bg-blue-600/30 text-blue-400 border border-blue-500/30 rounded-xl text-sm font-bold transition-all flex items-center justify-center gap-2">
                                            <span>ยังไม่มี URL?</span> <span className="underline">ดูวิธีทำที่นี่</span>
                                        </button>
                                    </div>
                                )}
                            </div>
                        )}

                        {errorMsg && (
                            <div className="mb-6 p-4 bg-red-500/10 border border-red-500/20 rounded-xl text-red-300 text-sm flex items-start gap-3 animate-in fade-in slide-in-from-top-2">
                                <AlertCircle className="w-5 h-5 flex-shrink-0 mt-0.5" />
                                <div>{errorMsg}</div>
                            </div>
                        )}

                        <div className="bg-slate-900/60 backdrop-blur-md border border-slate-800 rounded-[2rem] p-6 md:p-8 shadow-2xl relative overflow-hidden">
                            {!isConfigured ? (
                                <div className="text-center py-16 space-y-6 opacity-50 pointer-events-none select-none filter grayscale">
                                    <div className="w-24 h-24 bg-slate-800 rounded-full flex items-center justify-center mx-auto border border-slate-700"><Globe className="w-12 h-12 text-slate-500" /></div>
                                    <h2 className="text-xl font-semibold text-slate-400">รอการตั้งค่า URL...</h2>
                                </div>
                            ) : (
                                <>
                                    {status === 'COMPLETED' ? (
                                        <div className="text-center py-8 space-y-8">
                                            <ProcessingView status={status} uploadTasks={uploadTasks} />
                                            <button onClick={handleReset} className="w-full md:w-auto px-8 py-4 bg-blue-600 hover:bg-blue-500 text-white rounded-xl font-bold transition-all shadow-lg shadow-blue-600/30 active:scale-[0.98]">
                                                อัปโหลดรูปอื่นอีก
                                            </button>
                                        </div>
                                    ) : (
                                        <>
                                            <DropZone onFilesDropped={handleFiles} status={status} />
                                            {(status === 'UPLOADING') && <ProcessingView status={status} uploadTasks={uploadTasks} />}
                                        </>
                                    )}
                                </>
                            )}
                        </div>
                    </div>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
<script type="module" src="/index.tsx"></script>
</body>
</html>